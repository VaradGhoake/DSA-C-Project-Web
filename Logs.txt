Had so much trouble with proxies.
Even though I set that correctly, I was getting Error-407: Authentication required

I solved it:
Copied the bashrc file to the home directory
Added these lines
            proxy="http://user:password@proxy-server.university:8080"
            export http_proxy=$proxy

Copied the wgetrc file to the home directory
And edited the "use proxy" field and also "http" field

Created wget.c file 
included stdlib and used system calls to execute commands
